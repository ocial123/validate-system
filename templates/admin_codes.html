{% extends "base.html" %}
{% block content %}
  <h3>ðŸ“‹ Admin Dashboard</h3>
  <form method="post" action="{{ url-for('admin_codes_new') }}">
    <input type="text" name="note" placeholder="Optional label">
    <button type="submit" class="button">+ Generate QR</button>
  </form>

  <table>
    <thead>
      <tr>
        <th>Note</th>
        <th>Created</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for code in codes %}
        <tr>
          <td data-label="Note">{{ code.note or "-" }}</td>
          <td data-label="Created">{{ code.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
          <td data-label="Status">
            {% if code.used_at %}
              <span style="color: var(--accent-red);">Used by {{ code.used_by }}</span>
            {% else %}
              <span style="color: var(--accent-gold);">Unused</span>
            {% endif %}
          </td>
          <td data-label="Actions">
            <form method="POST" action="{{ url_for('delete_code', code_id=code.code_id) }}" onsubmit="return confirm('Are you sure you want to delete this code?');">
              <button type="submit" style="background:var(--accent-red); color:#fff;">Delete</button>
            </form>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}